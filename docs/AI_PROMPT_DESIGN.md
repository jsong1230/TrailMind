# TrailMind AI 프롬프트 디자인

## 개요

TrailMind의 핵심 AI 프롬프트는 CTO를 위한 개인 반성 시스템의 핵심입니다. 사용자의 원시 입력을 분석하여 구조화된 인사이트를 제공합니다.

## 설계 원칙

### 1. 명확성 (Clarity)
- 사실과 해석을 명확히 분리
- 구조화된 사고 지원
- 모호함 최소화

### 2. 분석적 접근 (Analytical)
- 패턴 인식에 초점
- 감정적 반응보다 논리적 분석
- 데이터 기반 관찰

### 3. 존중 (Respectful)
- 사용자의 지능과 경험 존중
- 조언보다 질문 중심
- 사용자의 자율성 보장

### 4. 진정성 (Authenticity)
- 클리셰 회피
- 과도한 긍정 지양
- 현실 인정

## 프롬프트 구조

### 분석 프레임워크

1. **사실 vs 해석 분리**
   - 관찰 가능한 사실 식별
   - 가정, 판단, 해석 구분
   - 사실과 결론 사이의 간극 파악

2. **감정 패턴 식별**
   - 명시적/암묵적 감정 탐지
   - 감정 강도와 트리거 분석
   - 반복되는 감정 패턴 인식

3. **관계 신호 강조**
   - 관계 관련 내용 식별 (업무, 개인, 팀 역학)
   - 상호작용, 기대, 경계의 패턴 파악
   - 주의가 필요한 관계 역학 플래그

4. **의사결정 패턴 탐지**
   - 언급되거나 암시된 결정 식별
   - 의사결정 프레임워크나 편향 인식
   - 결정 관련 긴장이나 불확실성 강조

### 출력 형식

#### Insight Summary
- 핵심 테마나 관심사 포착
- 가장 중요한 패턴이나 긴장 강조
- 사실적이고 관찰적 (규범적이지 않음)
- 2-3문장으로 간결하게

#### Key Question
- 더 깊은 반성을 유도하는 질문
- 가정에 도전하거나 새로운 관점 제공
- 사용자의 상황에 특화
- 일반적이거나 동기부여적 언어 회피

#### Suggested Reframe (선택적)
- 상황을 보는 다른 렌즈 제공
- 제시된 사실에 기반
- 독성 긍정이나 강제된 낙관주의 회피
- 진정으로 유용하지 않으면 생략 가능

## 톤 가이드라인

- **차분함**: 안정적이고 측정 가능하며 반응적이지 않음
- **분석적**: 패턴, 구조, 논리에 초점
- **존중**: 사용자의 지능과 경험 존중
- **클리셰 없음**: "모든 일에는 이유가 있다" 같은 표현 회피
- **과도한 긍정 없음**: 어려움을 인정하되 최소화하지 않음
- **직접적**: 명확하고 구체적, 모호하거나 추상적이지 않음

## 사용 예시

### 입력 예시
```
오늘 팀 미팅에서 내 제안이 거부당했다. 
항상 내 아이디어가 충분히 검토되지 않는 것 같다. 
아마도 팀이 내 의견을 진지하게 받아들이지 않는 것 같다.
```

### 예상 출력

#### Insight Summary
사용자는 팀 미팅에서 제안이 거부된 구체적인 사건을 보고하고 있습니다. 이 사건을 "항상"이라는 패턴으로 일반화하고 있으며, 그 원인을 팀의 태도로 해석하고 있습니다. 사실(거부된 제안)과 해석(팀이 의견을 진지하게 받아들이지 않음) 사이에 명확한 구분이 필요합니다.

#### Key Question
이번 거부와 과거의 다른 상황들 사이에서 어떤 구체적인 차이점이나 공통점을 관찰할 수 있나요?

#### Suggested Reframe
거부 자체보다는, 제안이 거부된 맥락(타이밍, 대안, 의사결정 프로세스)을 살펴보면 다른 패턴이 보일 수 있습니다.

## 구현 위치

프롬프트는 `api/generate.ts`에 정의되어 있으며, 다음과 같이 사용할 수 있습니다:

```typescript
import { generateAiResult } from './utils/api';

// AI 분석 요청
const result = await generateAiResult({
  guideId: '사고_명확성',
  inputText: userInput,
  meta: {
    date: '2024-01-01',
    activity: 'walk',
    aloneOrWith: 'alone'
  }
});

// 응답은 이미 구조화된 JSON
const analysis = result.result;
```

또는 래퍼 함수 사용:

```typescript
import { generateReflectionAnalysis } from './utils/aiClient';

const analysis = await generateReflectionAnalysis(
  userInput,
  'thinking', // 카테고리
  { date: '2024-01-01' } // 메타 정보
);
```

## 향후 확장

- 컨텍스트 기억 (이전 반성과의 연결)
- 카테고리별 특화 분석
- 패턴 추적 및 시각화
- 의사결정 프레임워크 제안

## 관련 문서

- [한글 반성 프롬프트](./KOREAN_REFLECTION_PROMPTS.md)
- [AI 통합 가이드](./AI_INTEGRATION.md)
- [프로젝트 제안서](./PROJECT_PROPOSAL.md)

